var zipCheckout=Class.create();zipCheckout.prototype={_extensions:[],_btn:null,_zipBtn:null,_zipBtnId:"zipmoneypayment-place-order",_selectedPaymentCode:null,options:{methodCode:"zipmoneypayment"},initialize:function(){},setupZipPlaceOrderButton:function(){var e=this._btn.clone(!0);e.setAttribute("id",this._zipBtnId),this._btn.insert({before:e}),this._zipBtn=e},switchButtons:function(e){var t="",i=this._btn,o=this._zipBtn,n=[o,i];e||(t=this._selectedPaymentCode==this.options.methodCode?o:i),n.each(function(e){e&&(e==t?e.show():e.hide())})},redirectToZip:function(){Zip.Checkout.init({redirect:this.options.redirect,checkoutUri:this.options.checkoutUri,redirectUri:this.options.redirectUrl,onError:this.onError})},onError:function(e){console.log(e)},getCurrentExtension:function(){var e=this,t=null;return this._extensions.each(function(i){i.name.toLowerCase()==e.options.checkoutExtension.toLowerCase()&&(t=new i["class"])}),t},setup:function(e){var t,i,o=this;try{this.options=Object.extend(this.options,e),t=o.getCurrentExtension(),void 0!=t&&t.setup(this),i=document.URL.toQueryParams(),void 0!=i["zip-in-context"]&&"true"==i["zip-in-context"]&&this.redirectToZip()}catch(n){console.log(n)}},register:function(e,t){this._extensions.push({"class":e,name:t})}},window.$zipCheckout=new zipCheckout;var Aitoc_Aitcheckout=Class.create();Aitoc_Aitcheckout.prototype={"super":null,_btn:null,initialize:function(e){this["super"]=e,this._btn=$("aitcheckout-place-order")},setup:function(e){this["super"]=e;var t=this;payment.currentMethod==this["super"].options.methodCode&&this._btn&&(this._btn.setAttribute("onclick",""),this._btn.observe("click",function(){t["super"].redirectToZip()}))}},void 0!=window.$zipCheckout&&window.$zipCheckout.register(Aitoc_Aitcheckout,"Aitoc_Aitcheckout");var GoMage_Checkout=Class.create();GoMage_Checkout.prototype={"super":null,_btn:null,initialize:function(e){this["super"]=e,this._btn=$("place-order")},setup:function(e){this["super"]=e;var t=this;payment.currentMethod==this["super"].options.methodCode&&this._btn&&(this._btn.setAttribute("onclick",""),this._btn.observe("click",function(){t["super"].redirectToZip()}))}},void 0!=window.$zipCheckout&&window.$zipCheckout.register(GoMage_Checkout,"GoMage_Checkout");var Zip_Idev_OnestepCheckout=Class.create();Zip_Idev_OnestepCheckout.prototype={"super":null,initialize:function(e){},setup:function(e){var t=this;this["super"]=e,this["super"]._btn=$("onestepcheckout-place-order"),this["super"]._selectedPaymentCode=payment.currentMethod,this["super"].setupZipPlaceOrderButton(),this["super"]._zipBtn.observe("click",function(e){_this.checkout(_this,e)}),this["super"].switchButtons(),this.methodChange(),$$("onestepcheckout-place-order-loading").length&&$$("onestepcheckout-place-order-loading").remove(),this._btn.removeClassName("grey").addClassName("orange"),this._btn.disabled=!1,Ajax.Responders.register({onComplete:function(e,i){"undefined"==typeof e.parameters.doNotMakeAjaxCallback&&t["super"].switchButtons()}})},checkout:function(e,t){var i=new VarienForm("onestepcheckout-form");if(already_placing_order=!1,review=!1,reviewmodal=!1,i.validator.validate()){if(!already_placing_order&&$$(".loading-ajax").length<=0){already_placing_order=!0;var o=e._zipBtn,n=new Element("div").addClassName("onestepcheckout-place-order-loading").update('<img src="'+e["super"].options.loaderImageUrl+'" />&nbsp;&nbsp;Please wait, processing your order...');o.parentNode.appendChild(n),o.removeClassName("orange").addClassName("grey"),o.disabled=!0,e["super"].redirectToZip()}}else Event.stop(t)},methodChange:function(){var e=$$('#checkout-payment-method-load input[name="payment[method]"]'),t=this;e.each(function(e){e.observe("click",function(){t["super"]._selectedPaymentCode=payment.currentMethod,t["super"].switchButtons()})})}},void 0!=window.$zipCheckout&&window.$zipCheckout.register(Zip_Idev_OnestepCheckout,"Idev_OnestepCheckout");var Zip_IWD_OnestepCheckout=Class.create();Zip_IWD_OnestepCheckout.prototype={"super":null,_btn:null,_zipBtn:null,_zipBtnId:"zipmoneypayment_place_order",initialize:function(e){},setup:function(e){var t=this;this["super"]=e,this["super"]._btn=$("iwd_opc_place_order_button"),"undefined"!=typeof IWD&&IWD.OPC.Plugin.event("saveOrder",function(){return IWD.OPC.Checkout.saveOrderUrl=null,t["super"].redirectToZip(),!0}),void 0!=OnePage&&(PaymentMethod.prototype.saveSection=function(){switch(this.showLoader(Singleton.get(OnePage).sectionContainer),this.getPaymentMethodCode()){case Singleton.get(PaymentMethodStripe).code:Singleton.get(PaymentMethodStripe).originalThis=t,Singleton.get(PaymentMethodStripe).originalArguments=_thisArguments,Singleton.get(PaymentMethodStripe).savePayment();break;case"zipmoneypayment":clearTimeout(Singleton.get(OnePage).validateTimeout),clearTimeout(Singleton.get(OnePage).blurTimeout),Singleton.get(OnePage).showLoader(Singleton.get(OnePage).sectionContainer),t["super"].redirectToZip();default:OnePage.prototype.saveSection.apply(this,arguments)}})}},void 0!=window.$zipCheckout&&window.$zipCheckout.register(Zip_IWD_OnestepCheckout,"Iwd_OnestepCheckout");var Zip_MageStore_OnestepCheckout=Class.create();Zip_MageStore_OnestepCheckout.prototype={"super":null,_btn:null,initialize:function(e){this["super"]=e,this._btn=$("onestepcheckout-button-place-order")},setup:function(e){this["super"]=e;var t=this,i=new Validation("one-step-checkout-form");payment.currentMethod==this["super"].options.methodCode&&this._btn&&(this._btn.setAttribute("onclick",""),this._btn.observe("click",function(){i.validate()&&checkpayment()&&(this.disabled=!0,disable_payment(),t["super"].redirectToZip())}))}},void 0!=window.$zipCheckout&&window.$zipCheckout.register(Zip_MageStore_OnestepCheckout,"MageStore_OnestepCheckout");var Zip_Mage_Checkout=Class.create();Zip_Mage_Checkout.prototype={"super":null,_btn:null,initialize:function(e){this["super"]=e,this._btn=$$(".btn-checkout")[0]},setup:function(e){this["super"]=e;var t=this;payment.currentMethod==this["super"].options.methodCode&&this._btn&&(this._btn.setAttribute("onclick",""),this._btn.observe("click",function(){t["super"].redirectToZip()}))}},void 0!=window.$zipCheckout&&window.$zipCheckout.register(Zip_Mage_Checkout,"Mage_Checkout");